  <!DOCTYPE html>
  <html lang="pt">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Simulador de Crédito</title>
      <link rel="preconnect" href="https://fonts.googleapis.com" />
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
      <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100..900&display=swap"
        rel="stylesheet"
      />
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          background-color: #f5f5f5;
          font-family: "Montserrat", serif;
        }

        main {
          display: flex;
          align-items: center;
          justify-content: center;
        }

        input#amount-text {
      width: 86%;
      height: 35px;
      margin: 29px auto;
      padding-left: 14px;
      font-size: 14px;
      border-radius: 5px;
      outline: none;
      border: 1px solid gray;
  }   

        select#months-select {
          width: 90%;
          margin: 20px auto;
          height: 35px;
          border-radius: 5px;
          outline: none;
          border: 1px solid gray;
          padding-left: 16px;
          font-size: 14px;
        }


        input#entry-value{
          width: 86%;
      margin: 20px auto;
      height: 35px;
      border: 1px solid gray;
      border-radius: 5px;
      padding-left: 16px;
      font-size: 14px;
        }

        .container {
          max-width: 1000px;
          margin: 0 auto;
          padding: 20px;
        }

        .direito {
          margin-left: 43px;
          width: 50%;
        }

        header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 14px 28px;
          background-color: #ffffff;
        }

        .logo {
          height: 80px;
        }

        nav a {
          margin-right: 20px;
          text-decoration: none;
          color: #333;
          font-weight: bold;
        }

        nav .highlight {
          color: #f6d620;
        }

        .credit-purpose {
          margin-top: 20px;
          width: 100%;
          font-size: 13px;
        }

        .credit-purpose h2 {
          margin-bottom: 10px;
          font-size: 13px;
          margin-top: 20px;
        }

        .purpose-options {
          width: 40%;
          display: flex;
        }

        .purpose-options button {
          margin: 5px;
          padding: 18px 12px;
          border: none;
          background-color: #fff;
          font-size: 11px;
        }

        .purpose-options .selected {
          background-color: #f6d620;
          color: #fff;
        }

        .simulator {
          display: flex;
          flex-direction: column;
          gap: 20px;
          margin-top: 20px;
          width: 100%;
        }

        .input-group {
          display: flex;
          gap: 10px;
          height: auto;
          flex-direction: column;
          background-color: #fff;
          border-radius: 5px;
        }

        .esquerdo {
      width: 50%;
  }



        .box {
          display: flex;
          justify-content: space-between;
          padding: 30px;
        }

        .download-btn {
          display: inline-block;
          margin: 20px auto;
          padding: 10px 20px;
          font-size: 16px;
          font-weight: bold;
          text-align: center;
          color: #000000;
          background-color: #f6d620;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          width: 100%;
          font-weight: 700;
        }

        .download-btn:hover {
          background-color: #d1b417;
        }


        input#start-date {
      width: 86%;
      margin: 31px auto;
      height: 30px;
      border-radius: 5px;
      outline: none;
      border: 1px solid gray;
      padding: 20px;
  }

  h2 {
      text-align: center;
      margin-bottom: 50px;
      margin-top: 50px;
  }
      </style>
    </head>
    <body>
      <header>
        <img src="images/VFBANK.png" alt="Logo" class="logo" />
        <nav>
          <a href="#">Simulador</a>
          <a href="#" class="highlight">Crédito Pessoal</a>
        </nav>
      </header>
      <div class="container">
        <main>
          <div class="esquerdo">
          <h2>Simule seu Crédito</h2>
            <section class="simulator">
              <div class="input-group">
                <div class="box">
                  <label for="amount-text">Quanto precisa?</label>
                  <!-- <span id="amount-display">R$ 300</span> -->
                </div>
                <input
                  type="text"
                  id="amount-text"
                  value=""
                  placeholder="Insira o valor que você deseja simular.."
                  
                />
              </div>

              <div class="input-group">
                <div class="box">
                  <label for="entry-value">Qual o valor de entrada?</label>
                </div>
                <input
                type="text"
                id="entry-value"
                value=""
                placeholder="Insira o valor de entrada.."
                
              />
              </div>
              <div class="input-group">
                <div class="box">
                  <label for="months-select">Pagar em quantos meses?</label>
                  <!-- <div class="details">
                    <span id="monthly-payment-display">R$ 112,50/mês</span>
                  </div> -->
                </div>
                <select id="months-select">
                  <option value="#" selected>Selecione um prazo</option>
                  <option value="12">12 meses</option>
                  <option value="24" >24 meses</option>
                  <option value="36">36 meses</option>
                  <option value="48">48 meses</option>
                  <option value="60">60 meses</option>
                </select>
              </div>
              <div class="input-group">
                  <div class="box">
                <label for="start-date">Data inicial do vencimento</label>
                  </div>
                <input type="date" id="start-date" />
              </div>
              <button class="download-btn" onclick="downloadSimulationPDF()">
                Simule Já<!DOCTYPE html>
                <html lang="en">
                  <head>
                    <meta charset="UTF-8" />
                    <meta
                      name="viewport"
                      content="width=device-width, initial-scale=1.0"
                    />
                    <title>Document</title>
                  </head>
                  <body></body>
                </html>
              </button>
            </section>
          </div>
        </main>
      </div>

      <script>
        function updateSimulation() {
          const amount =
            parseFloat(document.getElementById("amount-text").value) || 0;
          const entryValue =
            parseFloat(document.getElementById("entry-value").value) || 0;
          const months =
            parseInt(document.getElementById("months-select").value) || 1;

          // Calcula o valor restante e a parcela mensal
          const remainingAmount = Math.max(amount - entryValue, 0);
          const monthlyPayment = (remainingAmount / months).toFixed(2);

          
        }

        function downloadSimulationPDF() {
          const { jsPDF } = window.jspdf;
          const doc = new jsPDF();

          // Pegar valores do formulário
          const amount =
            parseFloat(document.getElementById("amount-text").value) || 0;
          const entryValue =
            parseFloat(document.getElementById("entry-value").value) || 0;
          const months =
            parseInt(document.getElementById("months-select").value) || 1;
          const startDate = document.getElementById("start-date").value;

          if (!startDate) {
            alert("Por favor, insira a data inicial do vencimento.");
            return;
          }

          // Cálculos
          const remainingAmount = Math.max(amount - entryValue, 0);
          const monthlyPayment = (remainingAmount / months).toFixed(2);

          // Adicionar logotipo
          const logoUrl = "images/VFBANK.png";
          doc.addImage(logoUrl, "PNG", 80, 10, 50, 30); // Ajuste da posição da logomarca

          // Ajustar faixa amarela de "Simulação de Crédito"
          doc.setFillColor(255, 204, 0); // Cor amarela
          doc.rect(10, 50, 190, 10, "F"); // Retângulo ajustado (largura e alinhamento)

          // Texto "Simulação de Crédito"
          doc.setFont("Helvetica", "bold");
          doc.setFontSize(14);
          doc.setTextColor(255, 255, 255); // Cor branca
          doc.text("Simulação de Crédito", 105, 57, null, null, "center"); // Texto centralizado na faixa

          // Tabela de Parâmetros
          const parametersTable = [
            ["Crédito", `R$ ${amount.toFixed(2)}`],
            ["Entrada", `R$ ${entryValue.toFixed(2)}`],
            ["Financiado", `R$ ${remainingAmount.toFixed(2)}`],
            ["Prazo (Meses)", `${months}`],
            ["Parcela (Mensal)", `R$ ${monthlyPayment}`],
          ];

          doc.autoTable({
            startY: 65, // Ajuste para começar logo abaixo da faixa
            head: [["PARÂMETROS", "VALORES"]],
            body: parametersTable,
            styles: { fontSize: 10, cellPadding: 5 },
            headStyles: { fillColor: [255, 204, 0], textColor: 0 },
            alternateRowStyles: { fillColor: [245, 245, 245] },
          });

          // Gerar tabela de parcelas com datas de vencimento
          const tableData = [];
          const startDateObj = new Date(startDate);

          let saldoAtual = remainingAmount;
          for (let i = 1; i <= months; i++) {
            const dueDate = new Date(startDateObj);
            dueDate.setMonth(dueDate.getMonth() + (i - 1));
            const formattedDate = dueDate.toLocaleDateString("pt-BR", {
              day: "2-digit",
              month: "2-digit",
              year: "numeric",
            });

            saldoAtual -= parseFloat(monthlyPayment);
            tableData.push([
              i, // Número da parcela
              formattedDate, // Data de vencimento
              `R$ ${saldoAtual.toFixed(2)}`, // Saldo Atual
              i === 1 ? `R$ ${entryValue.toFixed(2)}` : "R$ 0.00", // Entrada
              `R$ ${monthlyPayment}`, // Parcela
              `R$ ${monthlyPayment}`, // Pagamento
            ]);
          }

          doc.autoTable({
            startY: doc.lastAutoTable.finalY + 10,
            head: [
              [
                "PARC",
                "VENCIMENTO",
                "SALDO ATUAL",
                "ENTRADA",
                "PARCELA",
                "PAGAMENTO",
              ],
            ],
            body: tableData,
            styles: { fontSize: 10, cellPadding: 4 },
            headStyles: { fillColor: [0, 0, 0], textColor: 255 },
            alternateRowStyles: { fillColor: [240, 240, 240] },
          });

          doc.save("simulacao_credito.pdf");
        }

        document
          .getElementById("amount-text")
          .addEventListener("change", updateSimulation);
        document
          .getElementById("entry-value")
          .addEventListener("change", updateSimulation);
        document
          .getElementById("months-select")
          .addEventListener("change", updateSimulation);
      </script>
    </body>
  </html>
